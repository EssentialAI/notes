
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to rectify two cameras? &#8212; Notes @ The Essential AI</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://essentialai.github.io/essentialai.github.io/cvip/image-rectification.html" />
    <link rel="shortcut icon" href="../_static/brain1.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Image Features and Matching" href="image-features.html" />
    <link rel="prev" title="Image Formation and Stereo Vision" href="image-formation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/lightmode.svg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Notes @ The Essential AI</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to Notes @ Essential AI
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="intro.html">
   Computer Vision and Image Processing
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="pinhole.html">
     Introduction and the Pinhole camera
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="CVIP_Project1.html">
     CVIP-project-1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="image-transformations.html">
     Image Transformations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="image-formation.html">
     Image Formation and Stereo Vision
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     How to rectify two cameras?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="image-features.html">
     Image Features and Matching
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="using-scale-as-feature.html">
     Using scale as a feature for correspondence
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-matching.html">
     Feature Matching
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="image-filtering.html">
     Image Filtering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="image-fourier-analysis.html">
     Image Fourier Analysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../reinforcement-learning/intro.html">
   Reinforcement Learning
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../reinforcement-learning/mab.html">
     The Multi-Armed Bandit problem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../reinforcement-learning/mab-code.html">
     Coding a simple (random) Multi-Armed Bandit Agent
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../reinforcement-learning/ab-testing.html">
     A/B/n testing using online advertising scenario
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../reinforcement-learning/epsilon-greedy.html">
     Epsilon Greedy explained
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../reinforcement-learning/optimistic-initial-values.html">
     Optimistic initial values
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/cvip/image-rectification.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   How to rectify two cameras?
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-essential-matrix">
     The Essential Matrix
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-fundamental-matrix">
     The Fundamental Matrix
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#correspondence-problem-using-fundamental-matrix">
   Correspondence problem using Fundamental Matrix
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>How to rectify two cameras?</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   How to rectify two cameras?
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-essential-matrix">
     The Essential Matrix
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-fundamental-matrix">
     The Fundamental Matrix
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#correspondence-problem-using-fundamental-matrix">
   Correspondence problem using Fundamental Matrix
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="how-to-rectify-two-cameras">
<h1>How to rectify two cameras?<a class="headerlink" href="#how-to-rectify-two-cameras" title="Permalink to this headline">#</a></h1>
<p><strong>Recap</strong></p>
<p>The entire aim of rectification is to perform the 2D <span class="math notranslate nohighlight">\(\rightarrow\)</span> 3D mapping from an image coordinate to a 3D real world point. This is required to ESTIMATE the true depth information of a point in space. <span class = 'high'>We have discussed, how this 2D <span class="math notranslate nohighlight">\(\rightarrow\)</span> 3D mapping is not possible by using a single image and we require a minimum of 2 images.</span></p>
<p>With two images, for depth estimation, we make use of <span class = 'high'>epipolar geometry.</span></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Given two image coordinates <span class="math notranslate nohighlight">\(x_l\)</span> and <span class="math notranslate nohighlight">\(x_r\)</span> of the same point from left and right cameras, can we perform the 2D to 3D mapping to estimate the depth between points in the real world?</p>
<p>Better yet, given a point <span class="math notranslate nohighlight">\(x_l\)</span> in the left camera, can we find the corresponding point <span class="math notranslate nohighlight">\(x_r\)</span> in the right camera? Multi-view geometry problem.</p>
</div>
<p>For pixel matching between two cameras, we need to first rectify the images, such that the pixel search between left and right images becomes a linear search.</p>
<p>To perform this rectification, we need to rotate cameras such that the image planes are parallel to each other.</p>
<div class="figure align-default" id="id1">
<img alt="imgs/epipolar.PNG" src="imgs/epipolar.PNG" />
<p class="caption"><span class="caption-number">Fig. 22 </span><span class="caption-text">Epipolar Geometry</span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</div>
<p><span class="math notranslate nohighlight">\(P \rightarrow\)</span> Point in real world. <span class="math notranslate nohighlight">\([X,Y,Z]^T\)</span></p>
<p><span class="math notranslate nohighlight">\( P_l \rightarrow \)</span> Position of <span class="math notranslate nohighlight">\(P\)</span> as seen from left camera. <span class="math notranslate nohighlight">\({P_l}_{3 \times 1}\)</span></p>
<p><span class="math notranslate nohighlight">\( P_r \rightarrow \)</span> Position of <span class="math notranslate nohighlight">\(P\)</span> as seen from right camera. <span class="math notranslate nohighlight">\({P_r}_{3 \times 1}\)</span></p>
<p><span class="math notranslate nohighlight">\( T \rightarrow \)</span> Baseline between the camera <span class="math notranslate nohighlight">\(C_l\)</span> and <span class="math notranslate nohighlight">\(C_r\)</span>.</p>
<p>Using the co-planarity constraint, we can find a relation between the point in the left camera and the point in the right camera.</p>
<div class="figure align-default" id="id2">
<img alt="imgs/co-planarity-constraint.PNG" src="imgs/co-planarity-constraint.PNG" />
<p class="caption"><span class="caption-number">Fig. 23 </span><span class="caption-text">Using coplanarity constraint to find the relation between <span class="math notranslate nohighlight">\(P_l\)</span> and <span class="math notranslate nohighlight">\(P_r\)</span></span><a class="headerlink" href="#id2" title="Permalink to this image">#</a></p>
</div>
<div class="section" id="the-essential-matrix">
<h2>The Essential Matrix<a class="headerlink" href="#the-essential-matrix" title="Permalink to this headline">#</a></h2>
<div class="figure align-default" id="id3">
<img alt="imgs/essential-matrix.PNG" src="imgs/essential-matrix.PNG" />
<p class="caption"><span class="caption-number">Fig. 24 </span><span class="caption-text">Essential Matrix</span><a class="headerlink" href="#id3" title="Permalink to this image">#</a></p>
</div>
<p>The vector <span class="math notranslate nohighlight">\(T = [T_x, T_y, T_z]^T\)</span> is the relative distance (in 3D coordinates) between the left and the right cameras.</p>
<p>The above figure gives us the relations:</p>
<div class="math notranslate nohighlight" id="equation-essential-matrix1">
<span class="eqno">(17)<a class="headerlink" href="#equation-essential-matrix1" title="Permalink to this equation">#</a></span>\[E = RS\]</div>
<div class="math notranslate nohighlight" id="equation-essential-matrix">
<span class="eqno">(18)<a class="headerlink" href="#equation-essential-matrix" title="Permalink to this equation">#</a></span>\[P_r^TEP_l = 0\]</div>
<p>If you look at the above equation carefully, the matrix <span class="math notranslate nohighlight">\(E\)</span> is not unique. The above equation is satisfied even if we use <span class="math notranslate nohighlight">\(2E\)</span> or <span class="math notranslate nohighlight">\(nE\)</span> instead of <span class="math notranslate nohighlight">\(E\)</span>. This means <span class="math notranslate nohighlight">\(E\)</span> is not unique.</p>
<div class="tip admonition">
<p class="admonition-title">Why is <span class="math notranslate nohighlight">\(E\)</span> not unique?</p>
<p>This is due to the fact what the baseline <span class="math notranslate nohighlight">\(T\)</span> provides us with the information of the direction between cameras, but does not provide the actual distance between the cameras. The equation <span class="math notranslate nohighlight">\(P_r^TRT \times P_l=0\)</span> is satisfied for any integer multiple of <span class="math notranslate nohighlight">\(T\)</span>.</p>
</div>
<p><span class="math notranslate nohighlight">\(E\)</span> has only 5 degrees of freedom.</p>
<p>Using <span class="math notranslate nohighlight">\(P_r^TEP_l = 0\)</span> we cannot find the exact relation between <span class="math notranslate nohighlight">\(P_l\)</span> and <span class="math notranslate nohighlight">\(P_r\)</span>. The equation has infinite solutions.</p>
</div>
<div class="section" id="the-fundamental-matrix">
<h2>The Fundamental Matrix<a class="headerlink" href="#the-fundamental-matrix" title="Permalink to this headline">#</a></h2>
<p><span class = 'high'>An important detail to observe here is that, <span class="math notranslate nohighlight">\(P_l\)</span> and <span class="math notranslate nohighlight">\(P_r\)</span> are 3D locations as seen from left and right cameras, respectively.</span></p>
<p><span class = 'high'>Fundamental matrix captures the relation between the 2D image coordinates.</span></p>
<div class="figure align-default" id="id4">
<img alt="imgs/fundamental-matrix.PNG" src="imgs/fundamental-matrix.PNG" />
<p class="caption"><span class="caption-number">Fig. 25 </span><span class="caption-text">Fundamental Matrix</span><a class="headerlink" href="#id4" title="Permalink to this image">#</a></p>
</div>
<p>In the above figure <span class="math notranslate nohighlight">\(M_l\)</span> and <span class="math notranslate nohighlight">\(M_r\)</span> are the intrinsic parameter matrices of left and right cameras respectively.</p>
<div class="tip admonition">
<p class="admonition-title">What is the use of Essential and Fundamental matrices?</p>
<p>The Essential Matrix is responsible for translating and rotating the cameras such that both the cameras are aligned with each other. It provides the constraint equation between the 3D points <span class="math notranslate nohighlight">\(P_l\)</span> and <span class="math notranslate nohighlight">\(P_r\)</span>.</p>
<p>The Fundamental Matrix is responsible for mapping the above 3D points onto the pixel locations <span class="math notranslate nohighlight">\(x_l\)</span> and <span class="math notranslate nohighlight">\(x_r\)</span> on the virtual image plane such that the epipolar lines are aligned. This means the correspondence problem now becomes a linear search.</p>
<p>This is how essential matrix and fundamental matrix perform image rectification.</p>
</div>
<p>Fundamental matrix knows the intrinsic parameters of both cameras, and the extrinsic parameters from the Essential Matrix. However, fundamental matrix also does not know the distance between the cameras. <span class = 'high'>Fundamental Matrix is not unique.</span></p>
<p>Even if you know <span class="math notranslate nohighlight">\(x_l\)</span>, you still cannot find the coordinates of <span class="math notranslate nohighlight">\(x_r\)</span>, using the fundamental matrix.</p>
<p>This perfectly matches with the <span class = 'high'>correspondence problem.</span> The Fundamental matrix helps us perform the DEPTH ESTIMATION, by boiling down the problem to correspondence problem. This problem shall be discussed in the future sections.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>E <span class="math notranslate nohighlight">\(\rightarrow\)</span> 5 Degrees of freedom</p>
<p>rank(E) <span class="math notranslate nohighlight">\(\rightarrow\)</span> 2</p>
<p>E <span class="math notranslate nohighlight">\(\rightarrow\)</span> extrinsic parameters</p>
<hr>
<p>F <span class="math notranslate nohighlight">\(\rightarrow\)</span> 7 Degrees of freedom</p>
<p>rank(F) <span class="math notranslate nohighlight">\(\rightarrow\)</span> 2</p>
<p>F <span class="math notranslate nohighlight">\(\rightarrow\)</span> extrinsic parameters from E and intrinsic parameters of both the cameras.</p>
<p><span class="math notranslate nohighlight">\(x_l\)</span> and <span class="math notranslate nohighlight">\(x_r\)</span> are the homogeneous coordinates of the 2D point. In the form of <span class="math notranslate nohighlight">\(s[X,Y,1]^T\)</span>.</p>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="correspondence-problem-using-fundamental-matrix">
<h1>Correspondence problem using Fundamental Matrix<a class="headerlink" href="#correspondence-problem-using-fundamental-matrix" title="Permalink to this headline">#</a></h1>
<div class="math notranslate nohighlight" id="equation-correspondence">
<span class="eqno">(19)<a class="headerlink" href="#equation-correspondence" title="Permalink to this equation">#</a></span>\[\begin{split}\begin{bmatrix}
x_i \\
y_i \\
1 
\end{bmatrix}^T \begin{bmatrix}
f_{11} &amp; f_{12} &amp; f_{13}  \\
f_{21} &amp; f_{22} &amp; f_{23}   \\
f_{31} &amp; f_{32} &amp; f_{33} 
\end{bmatrix}
\begin{bmatrix}
x_{i}' \\
y_{i}' \\
1 
\end{bmatrix}=0\end{split}\]</div>
<p>In the above equation, if we find the Fundamental matrix, we can find the relation between <span class="math notranslate nohighlight">\(x_l\)</span> and <span class="math notranslate nohighlight">\(x_r\)</span>. This means, we can map any 2D image coordinate from one camera to a 2D image coordinate on another camera. This would solve the depth estimation and the 2D <span class="math notranslate nohighlight">\(\rightarrow\)</span> 3D.</p>
<p><strong>Finding <span class="math notranslate nohighlight">\(F\)</span> can be solved if we find 8 corresponding points from left camera and right camera.</strong></p>
<!-- Intuitively, to rectify two cameras with each other, we need to rotate the cameras.
1. Rotate right (or left) camera to be in the same pose as left (or right) camera.
2. Then rotate both cameras to be parallel to the baseline.

Before contuining to image rectification, lets define some notations.

$x_1$ is the object location (usually a point), located in image1.

$x_2$ is the object location (usually a point), located in image2.

Before solving the correspondence problem, we are required to rotate the cameras to be in line with eachother.

Let $X = [X,Y,Z]^T$ be the world coordinate of the image coordinates, $x_1$ and $x_2$.

From {eq}`projection` we know that the image location of a point is found by the dot product of intrinsic and extrinsic camera parameters.

$$
x_1 = KR_1X = R_1^{-1}K^{-1}x_1
$$

$$
x_2 = KR_1X = K R_2R_1^{-1}K^{-1}*x_1
$$

This gives us a representation of $x_2$ in terms of $x_1$ after rotation.

```{math}
:label: recitification

x_2 = Hx_1
```

$$
H = KR_2R_1^{-1}K^{-1}
$$

Here in the above case, both cameras are considered to have the same intrinsic parameter matrix $K$. Else, $K_1$, $K_2$.

In short, to find the matrix $H$, we need to know:
1. Intrinsic parameters of the cameras
2. The pose of the camera.

The translation is considered to be $0$ here.

## Fundamental matrix

<span class = 'high'>The epipolar geometry is the intrinsic projective geometry between two views. It is independent of scene structure, and only depends on the internal parameters and the relative pose.</span>

The fundamental matrix $F$ encapsulates this intrinsic geometry. It is a $3 \times 3$ matrix of <span class ='high'>rank 2</span>. If a point in a 3-space $X$ is images as $x_1$ in the first view and $x_2$ in the second, then the image points satisfy the relation:

```{math}
:label: fundamental
x_2^TFx = 0
```

### Calculating fundamental matrix

$$
P_r = R(P_l-T)
$$ -->
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "EssentialAI/notes",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./cvip"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="image-formation.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Image Formation and Stereo Vision</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="image-features.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Image Features and Matching</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Naresh Kumar<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>